<!DOCTYPE html>
<html lang='en'>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>iStage</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../assets/css/style.css">
</head>
<body>
<nav class="nav" role="navigation" aria-label="Primary">
  <div class="nav-inner">
    <div class="container row">
      <a class="brand" href="../" aria-label="iStage">
        <img class="brand-logo" src="../assets/img/logo.png" alt="" loading="eager" decoding="async">
        <span class="brand-text">iStage</span>
      </a>
      <ul class="menu desktop">
        <li><a href="../iStage-26/">iStage 26</a></li>
        <li><a href="../iStage-18/">iStage 18</a></li>
        <li><a href="../compare/">Compare</a></li>
        <li><a href="../releases/">Releases</a></li>
        <li><a href="../help/">Help</a></li>
        <li><a href="../gallery/">Gallery</a></li>
      </ul>
      <button class="nav-toggle" aria-label="Open menu" aria-expanded="false" aria-controls="mobile-sheet">
        <span class="nav-toggle-bar"></span>
      </button>
    </div>
    <div class="container sheet" id="mobile-sheet" aria-hidden="true">
      <div class="sheet-content">
        <ul class="mobile-menu">
          <li><a href="../iStage-26/">iStage 26</a></li>
          <li><a href="../iStage-18/">iStage 18</a></li>
          <li><a href="../compare/">Compare</a></li>
          <li><a href="../releases/">Releases</a></li>
          <li><a href="../help/">Help</a></li>
          <li><a href="../gallery/">Gallery</a></li>
        </ul>
      </div>
    </div>
  </div>
</nav>
<main class='container prose'><h1>Compare</h1></main>
<footer class="footer">
  <div class="container small muted">Â© <span id="year"></span> iStage. Not affiliated with Apple Inc.</div>
  <script>document.getElementById('year').textContent = new Date().getFullYear();</script>
  <script>
    const nav = document.querySelector('.nav');
    const toggle = document.querySelector('.nav-toggle');
    const sheet  = document.getElementById('mobile-sheet');
    const body   = document.body;
    if (toggle && sheet) {
      toggle.addEventListener('click', () => {
        const open = nav.classList.toggle('nav--open');
        toggle.setAttribute('aria-expanded', open ? 'true' : 'false');
        sheet.setAttribute('aria-hidden', open ? 'false' : 'true');
        body.classList.toggle('no-scroll', open);
      });
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && nav.classList.contains('nav--open')) {
          nav.classList.remove('nav--open');
          toggle.setAttribute('aria-expanded','false');
          sheet.setAttribute('aria-hidden','true');
          body.classList.remove('no-scroll');
        }
      });
    }
    const brand = document.querySelector('.brand');
    const logo  = document.querySelector('.brand-logo');
    const txt   = document.querySelector('.brand-text');
    function update(){ if(brand&&logo&&txt && logo.naturalWidth>0){ brand.classList.add('has-logo'); } }
    if (logo){ if (logo.complete) update(); logo.addEventListener('load', update); logo.addEventListener('error', ()=>brand&&brand.classList.remove('has-logo')); }
  </script>
</footer>

<script>
// === Dynamic nav backdrop tied to first product section ===
(function(){
  const backdrop = document.getElementById('navBackdrop') || (function(){
    const d=document.createElement('div'); d.id='navBackdrop'; document.body.prepend(d); return d;
  })();
  // Helper: get first product/hero section
  function getHero(){
    return document.querySelector('.hero, .section-hero, .product-hero, section.hero, section#hero, section[data-hero], .stage26, .istage26, .product--26, .product-first, .first-product, [data-product="26"]') || 
           document.querySelector('main section, section');
  }
  function isDarkColor(c){
    if(!c) return false;
    // Parse rgb/rgba or hex
    const ctx = document.createElement('canvas').getContext('2d');
    // normalize: set fillStyle handles many formats
    try { ctx.fillStyle = c; } catch(e){ return false; }
    const hex = ctx.fillStyle; // like #rrggbb
    const r = parseInt(hex.slice(1,3),16);
    const g = parseInt(hex.slice(3,5),16);
    const b = parseInt(hex.slice(5,7),16);
    // luminance threshold
    const L = 0.2126*r + 0.7152*g + 0.0722*b;
    return L < 105; // dark if luminance low
  }
  function computeHeroBg(){
    const hero = getHero();
    if(!hero){ return null; }
    const cs = getComputedStyle(hero);
    // prefer background-color of hero; fallback body
    let bg = cs.backgroundColor;
    if(!bg || bg==='transparent' || bg==='rgba(0, 0, 0, 0)'){
      const bodyBg = getComputedStyle(document.body).backgroundColor;
      if(bodyBg && bodyBg !== 'rgba(0, 0, 0, 0)') bg = bodyBg;
    }
    return bg;
  }
  function apply(){
    const bg = computeHeroBg();
    if(!bg) return;
    // Set page background to match hero while hero is at top of page
    document.documentElement.style.setProperty('--page-bg', bg);
    // Backdrop mirrors hero theme (dark -> black, light -> white)
    const dark = isDarkColor(bg);
    const color = dark ? '#000000' : '#ffffff';
    backdrop.style.backgroundColor = color;
  }
  apply();
  window.addEventListener('load', apply, {passive:true});
  window.addEventListener('resize', apply, {passive:true});
  window.addEventListener('scroll', apply, {passive:true});
})();
</script>
</body>
</html>