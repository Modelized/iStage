/* ========== iStage CSS ========== */

/* ===== Base ===== */
*{box-sizing:border-box}
html{
  margin:0;
  padding:0;
  overflow-x:hidden;
  -webkit-text-size-adjust:100%;  /* prevent iOS from auto-zooming text on rotation */
}
body{
  margin:0;
  padding:0;
  overflow-x:hidden;
}
:root{
  --apple-blue:#0071e3;
  --radius:16px;
  --nav-pill-height-mobile:56px;
  --nav-pill-height-desktop:44px;
  --nav-icon-size:40px;

  /* Nav palette (fixed) */
  --nav-backdrop:linear-gradient(to bottom, rgba(4,6,14,.9), rgba(4,6,14,0));     /* no solid strip behind nav */
  --nav-border:#ffffff33;    /* nav outline */

  /* Offsets for first section under the fixed nav */
  --nav-offset-mobile:96px;
  --nav-offset-desktop:112px;
}
body{
  font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Noto Sans, Helvetica, Arial, Apple Color Emoji, Segoe UI Emoji, Noto Color Emoji, sans-serif;
  line-height:1.6; color:#111317; background:#fff;
}
.container{max-width:1100px;margin:0 auto;padding:0 12px}
.muted{color:#5e6572}
.small{font-size:.9rem}
.no-scroll{overflow:hidden}

/* Nav */
.nav-backdrop{
  position:fixed; top:0; left:0; right:0;
  height:120px;
  background:var(--nav-backdrop);
  z-index:1;               /* keep behind the nav at all times */
  pointer-events:none;
}
@media (min-width:900px){
  .nav-backdrop{
    height:96px;
  }
}
@supports (height: env(safe-area-inset-top)) {
  .nav-backdrop{height:calc(env(safe-area-inset-top) + 112px)}
}
.nav{
  position:fixed;
  top:calc(env(safe-area-inset-top, 0px) + 12px);
  left:0; right:0;
  z-index:1000;           /* above .nav-backdrop */
  padding:0;
  pointer-events:none;
}
.nav *{pointer-events:auto}
.nav-inner{
  position:relative;
  z-index:2;                               /* keep contents above backdrop */
}

/* Desktop / landscape: centered frosted pill behind menu only */
@media (min-width:900px), (max-width:900px) and (orientation:landscape){
  .row{
    height:var(--nav-pill-height-desktop);
  }
  .nav-inner::before{
    content:"";
    position:absolute;
    top:50%;
    left:0;
    right:0;
    transform:translateY(-50%);
    margin-inline:auto;
    width:min(720px, 100% - 160px);
    height:var(--nav-pill-height-desktop);
    border-radius:calc(var(--nav-pill-height-desktop) / 2);
    border:1px solid var(--nav-border);
    background:rgba(20,24,32,.52);
    backdrop-filter:saturate(170%) blur(18px);
    -webkit-backdrop-filter:saturate(170%) blur(18px);
    box-shadow:0 14px 40px rgba(0,0,0,.28);
    z-index:-1;
  }
}
.row{
  height:var(--nav-pill-height-mobile);                 /* slightly slimmer nav bar */
  display:flex;
  align-items:center;
  padding:0 16px;
  gap:16px;
}
.brand{display:flex; align-items:center; gap:10px; text-decoration:none; color:#e8e9ec}
.brand-logo{
  display:none;
  height:clamp(30px, 7.5vw, 36px);
  width:auto;
}
.brand-text{display:inline}
.brand.has-logo .brand-logo{display:block}
.brand.has-logo .brand-text{display:none}
.menu{
  display:flex;
  gap:14px;
  list-style:none;
  margin:0 auto;
  padding:0;
  font-size:.95rem;            /* slightly smaller label text */
}
.nav-right{
  display:flex;
  align-items:center;
  justify-content:flex-end;
  gap:10px;
}

.nav-search{
  position:relative;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:var(--nav-icon-size);
  height:var(--nav-icon-size);
  border-radius:50%;
  border:none;
  background:transparent;
  color:#e8e9ec;
  text-decoration:none;
}

.nav-search-icon{
  width:18px;
  height:18px;
  stroke:currentColor;
  stroke-width:1.7px;
  fill:none;
}

.nav-search-icon circle,
.nav-search-icon line{
  vector-effect:non-scaling-stroke;
  stroke-linecap:round;
}




.menu a{
  color:#e8e9ec;
  text-decoration:none;
  padding:6px 10px;            /* reduced vertical padding for a thinner pill */
  border-radius:12px;
}
.nav-toggle{display:none; width:var(--nav-icon-size); height:var(--nav-icon-size); border:none; outline:none; border-radius:50%; background:transparent !important; color:#e8e9ec; place-items:center; z-index:2}
.nav--open .nav-toggle{ background:rgba(255,255,255,.06) !important; }
.nav-toggle:focus,.nav-toggle:focus-visible{outline:none}
.nav-toggle-bar{display:block; width:18px; height:2px; background:currentColor; position:relative; border-radius:2px}
.nav-toggle-bar::before,.nav-toggle-bar::after{content:""; position:absolute; left:0; width:18px; height:2px; background:currentColor; border-radius:2px; transition:transform .35s cubic-bezier(.22,1,.36,1), opacity .2s linear}
.nav-toggle-bar::before{top:-6px}.nav-toggle-bar::after{top:6px}
.sheet{display:none}

/* Mobile nav only for portrait orientation on narrow viewports */
.nav-search:active{
  background:rgba(255,255,255,.06);
}
@media (max-width:900px) and (orientation:portrait){
  .desktop{display:none}
  .nav-toggle{display:grid}
  .nav-inner{
    margin:0 16px;
    border:1px solid var(--nav-border);
    border-radius:calc(var(--nav-pill-height-mobile) / 2);
    background:rgba(20,24,32,.52);
    backdrop-filter:saturate(170%) blur(18px);
    -webkit-backdrop-filter:saturate(170%) blur(18px);
    box-shadow:0 14px 40px rgba(0,0,0,.28);
  }
  .sheet{
    display:grid;
    grid-template-rows:0fr;
    transition:grid-template-rows .45s cubic-bezier(.22,1,.36,1);
  }
  .row{
    height:var(--nav-pill-height-mobile);
    padding:0 16px;       /* symmetric left/right padding so logo and hamburger are equally inset */
  }
  .nav-search{
    width:var(--nav-icon-size);
    height:var(--nav-icon-size);
    border-radius:50%;
    border:none;
    background:transparent;
    box-shadow:none;
    backdrop-filter:none;
    -webkit-backdrop-filter:none;
    padding:0;
  }
  .nav-right{
    display:flex;
    align-items:center;
    justify-content:flex-end;
    gap:8px;
    margin-left:auto;
  }
  .nav-search{
    order:1;
  }
  .nav-toggle{
    order:2;
    margin-right:0;       /* ensure no extra right margin on the hamburger icon */
  }
}
.sheet-content{overflow:hidden}
.mobile-menu{
  list-style:none;
  margin:0;
  padding:16px 4px 18px;
}
.mobile-menu a{
  display:block;
  padding:10px 12px;
  font-size:1.25rem;
  line-height:1.35;
  font-weight:600;
  color:#e8e9ec;
  text-decoration:none;
  border-radius:12px;
}
/* Hover styles only on pointer/hover devices (desktop/trackpad), to avoid sticky hover on iOS */
@media (hover:hover) and (pointer:fine){
  .menu a:hover{background:rgba(255,255,255,.06)}
  .mobile-menu a:hover{background:rgba(255,255,255,.06)}
  .nav-search:hover{
    background:rgba(255,255,255,.06);
  }
}
.menu a:active,
.mobile-menu a:active{
  background:rgba(255,255,255,.06);
}
.nav--open .sheet{grid-template-rows:1fr}
.nav--open .nav-toggle-bar{background:transparent}
.nav--open .nav-toggle-bar::before{transform:translateY(6px) rotate(45deg)}
.nav--open .nav-toggle-bar::after{transform:translateY(-6px) rotate(-45deg)}

/* Active menu item (only desktop + mobile landscape) */
@media (min-width:900px), (max-width:900px) and (orientation:landscape){
  .menu a.is-current{
    background:rgba(255,255,255,.16);
  }
}

/* Sections */
.section{padding:44px 0 32px}
.section + .section{margin-top:12px}
.section--first{
  margin-top:0;
  padding-top:calc(env(safe-area-inset-top) + var(--nav-offset-mobile));
}
@media (min-width:900px){
  .section--first{padding-top:calc(env(safe-area-inset-top) + var(--nav-offset-desktop))}
}
@media (max-width:900px) and (orientation:landscape){
  .section--first{
    padding-top:calc(env(safe-area-inset-top) + var(--nav-offset-desktop));
  }
}
.section--black,
.section--white{
  position:relative;
}
.section--black{background:#000; color:#e8e9ec}
.section--white{background:#f5f5f7; color:#111317}

/* Full-bleed backgrounds for black/white sections */
.section--black::before,
.section--white::before{
  content:"";
  position:absolute;
  top:0;
  bottom:0;
  left:50%;
  right:50%;
  margin-left:calc(-50vw + 50%);
  margin-right:calc(-50vw + 50%);
  z-index:-1;
}
.section--black::before{background:#000}
.section--white::before{background:#f5f5f7}

/* Hero */
.hero{display:flex; flex-direction:column; align-items:center; gap:16px}
.copy{text-align:center; display:flex; flex-direction:column; align-items:center; gap:12px; padding:0 6px}
.copy .title{margin:0; font-size:clamp(28px,4.6vw,56px); line-height:1.06; letter-spacing:-.01em}
.copy .subtitle{margin:0; color:rgba(232,233,236,.88)}
.section--white .copy .subtitle{color:#5e6572}
.cta{display:flex; gap:12px; justify-content:center; margin-top:14px}

/* Hero image block */
.media{
  width:100%;
  background-position:center;
  background-repeat:no-repeat;
  background-size:cover;
  border-radius:12px;
  aspect-ratio:1/1; /* mobile */
}
@media (min-width:900px){
  .media{aspect-ratio:16/9; width:92%; margin:0 auto}
}

/* Image sources */
.media-26{
  background-image:
    url("../img/hero-iStage-26-mobile.jpg"),
    url("../img/hero-iStage-26-mobile.png");
}
.media-18{
  background-image:
    url("../img/hero-iStage-18-mobile.jpg"),
    url("../img/hero-iStage-18-mobile.png");
}
@media (min-width:900px){
  .media-26{background-image:
    url("../img/hero-iStage-26-desktop.jpg"),
    url("../img/hero-iStage-26-desktop.png")}
  .media-18{background-image:
    url("../img/hero-iStage-18-desktop.jpg"),
    url("../img/hero-iStage-18-desktop.png")}
}

/* Buttons */
a.btn,.btn{
  display:inline-flex; align-items:center; justify-content:center; gap:.4ch;
  padding:12px 18px; border-radius:999px; font-weight:500; line-height:1;
  text-decoration:none !important; border:0; appearance:none; -webkit-appearance:none;
}
a.btn:link,a.btn:visited{color:inherit}
.btn-blue{background:var(--apple-blue); color:#fff !important}
.btn-blue:hover{filter:brightness(1.05)}
.btn-outline{
  color:var(--apple-blue) !important;
  border:2px solid currentColor !important;
  background:transparent !important;
  box-shadow:none !important;
}
.btn-outline:hover{background:color-mix(in oklab, var(--apple-blue), transparent 92%)}

/* Releases */
.card{background:rgba(18,21,27,1); border:1px solid var(--nav-border); border-radius:18px; padding:18px; color:#e8e9ec}
.releases-list{display:grid; gap:16px}
.release-head{display:flex; align-items:center; justify-content:space-between; gap:12px}
.tag{font-size:.8rem; padding:.2rem .5rem; border:1px solid var(--nav-border); border-radius:999px; color:#a7acb7}

/* Version tabs */
.version-tabs-wrap{display:flex; justify-content:center; margin-bottom:18px}
.version-tabs-shell{display:flex; align-items:center; gap:8px}
.chev{width:32px; height:32px; padding:0}
.version-tabs{position:relative; display:flex; gap:6px; align-items:center; padding:6px; border-radius:14px; border:1px solid var(--nav-border); background:rgba(15,17,22,.75); backdrop-filter:saturate(160%) blur(12px); -webkit-backdrop-filter:saturate(160%) blur(12px)}
.version-tabs.viewported .tab[hidden]{display:none !important}
.version-thumb{position:absolute; top:4px; bottom:4px; left:6px; width:0; border-radius:12px; background:rgba(255,255,255,.12); transition:transform .45s cubic-bezier(.22,1,.36,1), width .45s cubic-bezier(.22,1,.36,1); pointer-events:none}
.tab{position:relative; z-index:1; border:0; background:transparent; color:#e8e9ec; padding:8px 10px; border-radius:10px; font-weight:600; cursor:pointer; white-space:nowrap}
[aria-selected="true"].tab{color:#e8e9ec}

/* Footer */
.footer{
  border-top:0;
  margin-top:12px;
  padding:24px clamp(16px, 6vw, 28px);
  background:#f5f5f7;          /* light mode */
  color:#a7acb7;
}
/* layout */
.footer-row{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:12px;
}
.footer a{color:inherit; text-decoration:none;}
.footer a:hover{text-decoration:underline;}
.footer-legal{margin-left:auto;}   /* push Legal to the right */

/* ===== Mobile menu item enter animations ===== */
.mobile-menu li{
  opacity:0;
  transform:translateY(-6px);
}

.nav--open .mobile-menu li{
  animation: mobile-menu-in .45s cubic-bezier(.22,1,.36,1) forwards;
  animation-delay: var(--menu-delay, 0s);
}

@keyframes mobile-menu-in{
  from{
    opacity:0;
    transform:translateY(-6px);
  }
  to{
    opacity:1;
    transform:translateY(0);
  }
}

/* Respect users who prefer reduced motion (mobile menu) */
@media (prefers-reduced-motion: reduce){
  .mobile-menu li{
    opacity:1 !important;
    transform:none !important;
    animation:none !important;
  }
}

/* ===== Reveal-on-scroll animations (opt‑in) ===== */
/* Add class="reveal" on elements to animate.
   JS should add a "js" class to <html>. If JS is unavailable (local preview, etc.),
   content remains visible by default.
   Customizable CSS variables per‑element:
     --reveal-distance: 18px;     (translate offset)
     --reveal-duration: .75s;     (animation/transition duration)
     --reveal-delay: 0s;          (stagger delay)
*/

@keyframes fade-up {
  from { opacity:0; transform: translateY(var(--reveal-distance, 18px)); }
  to   { opacity:1; transform: translateY(0); }
}

/* Fallback visible (no JS): reveal elements are shown by default */
.reveal{
  opacity:1;
  transform:none;
}

/* When JS is active, hide until intersecting */
.js .reveal{
  opacity:0;
  transform: translateY(var(--reveal-distance, 18px));
  will-change: opacity, transform;
  transition:
    opacity var(--reveal-duration, .75s) cubic-bezier(.22,1,.36,1),
    transform var(--reveal-duration, .75s) cubic-bezier(.22,1,.36,1);
  transition-delay: var(--reveal-delay, 0s);
}

/* Visible state (after reveal) */
.js .reveal.is-revealed{
  opacity:1;
  transform:none;
}

/* Optional: run once on page load without JS */
.reveal-onload{
  animation: fade-up var(--reveal-duration, .75s) cubic-bezier(.22,1,.36,1) both;
  animation-delay: var(--reveal-delay, 0s);
}

/* Delay utilities for easy staggering */
.reveal-delay-0{ --reveal-delay: 0s; }
.reveal-delay-1{ --reveal-delay: .12s; }
.reveal-delay-2{ --reveal-delay: .24s; }
.reveal-delay-3{ --reveal-delay: .36s; }
.reveal-delay-4{ --reveal-delay: .48s; }
.reveal-delay-5{ --reveal-delay: .60s; }

/* Variant distances */
.reveal--short{ --reveal-distance: 10px; }
.reveal--long{  --reveal-distance: 28px; }

/* Respect users who prefer reduced motion (reveal animations) */
@media (prefers-reduced-motion: reduce){
  .reveal,
  .js .reveal,
  .js .reveal.is-revealed,
  .reveal-onload{
    opacity:1 !important;
    transform:none !important;
    transition:none !important;
    animation:none !important;
  }
}

/* ========== End ========== */
